<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Love.exe</title>
    <style>
        /* --- Reset & Base --- */
        * { box-sizing: border-box; margin: 0; padding: 0; user-select: none; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
            background: linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 100%);
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        /* --- Desktop Icons --- */
        .desktop-icon {
            position: absolute;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            width: 80px;
            transition: transform 0.1s;
            z-index: 10;
        }
        .desktop-icon:active { transform: scale(0.95); }

        /* App Icon */
        #icon-love { top: 50px; left: 50px; }
        .icon-img {
            width: 48px;
            height: 48px;
            background: #ff6b81;
            mask: url('data:image/svg+xml;utf8,<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>') no-repeat center;
            -webkit-mask: url('data:image/svg+xml;utf8,<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>') no-repeat center;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            background-color: #ff4757;
        }
        .icon-label { margin-top: 8px; color: white; text-shadow: 0 1px 3px rgba(0,0,0,0.4); font-size: 14px; font-weight: 500; }

        /* Sticky Note Icon */
        #icon-note {
            top: 150px;
            left: 50px;
            cursor: default; /* Indicates it doesn't do anything */
        }
        .note-img {
            width: 50px;
            height: 50px;
            background: #fef68a; /* Yellow note color */
            box-shadow: 2px 4px 8px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Comic Sans MS', 'Chalkboard SE', sans-serif;
            color: #ef4444; /* Red marker color */
            font-weight: bold;
            font-size: 14px;
            transform: rotate(-5deg);
            position: relative;
        }
        /* Folded corner effect */
        .note-img::after {
            content: '';
            position: absolute;
            bottom: 0;
            right: 0;
            border-width: 0 0 10px 10px;
            border-style: solid;
            border-color: transparent #fde047 transparent transparent; /* Slightly darker yellow */
            box-shadow: -2px -2px 2px rgba(0,0,0,0.1);
        }

        /* --- Window System --- */
        .window {
            width: 380px;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2), 0 5px 15px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            transform: scale(0);
            opacity: 0;
            transition: transform 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28), opacity 0.3s;
            position: relative;
            z-index: 20;
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.5);
            pointer-events: none; /* FIX: Don't block clicks when closed */
        }
        .window.open {
            transform: scale(1);
            opacity: 1;
            pointer-events: auto; /* Re-enable clicks when open */
        }

        .title-bar {
            background: linear-gradient(90deg, #ff9a9e 0%, #fecfef 99%, #fecfef 100%);
            padding: 10px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #eee;
            color: white;
            font-weight: bold;
        }
        .controls { display: flex; gap: 6px; }
        .dot { width: 12px; height: 12px; border-radius: 50%; background: rgba(255,255,255,0.5); }
        .dot.close-btn { background: #ff5f57; cursor: pointer; }

        .content {
            padding: 30px;
            min-height: 400px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        /* --- Screens --- */
        #screen-login {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            animation: fadeIn 0.5s ease;
            position: absolute;
            z-index: 10;
        }
        .avatar {
            width: 100px;
            height: 100px;
            background: #a2d2ff;
            border-radius: 50%;
            margin-bottom: 15px;
            position: relative;
            overflow: hidden;
            border: 3px solid #ff9a9e;
        }
        .username { font-size: 24px; color: #444; margin-bottom: 25px; font-weight: 600; }

        .btn {
            background: #ff6b81;
            color: white;
            border: none;
            padding: 12px 40px;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 10px rgba(255, 107, 129, 0.3);
            margin-top: 10px;
        }
        .btn:hover { transform: translateY(-2px); }
        .btn:active { transform: translateY(0); }

        .hidden { display: none !important; }

        #screen-main {
            display: none;
            width: 100%;
            height: 100%;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* --- Icon Stage --- */
        .icon-stage {
            width: 200px; /* Slightly wider for labels */
            height: 160px;
            position: relative;
            margin-bottom: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        /* Gift Box */
        .gift-svg { width: 100px; height: 100px; display: none; transform: scale(0); transition: transform 0.5s; }
        
        /* RAM Stick */
        .ram-container {
            display: none;
            flex-direction: column;
            align-items: center;
            opacity: 0;
            transform: translateY(20px) rotate(-5deg);
            transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .ram-svg { width: 140px; height: 80px; }
        .ram-label {
            margin-top: 5px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 14px;
            color: #555;
            background: #eee;
            padding: 2px 6px;
            border-radius: 4px;
            border: 1px solid #ddd;
        }

        /* Infinity Icon */
        .infinity-svg {
            width: 100px;
            height: 60px;
            display: none;
            opacity: 0;
            stroke: #ff6b81;
            stroke-width: 8;
            fill: none;
            stroke-linecap: round;
            stroke-dasharray: 300;
            stroke-dashoffset: 300; /* Hidden line */
            transition: stroke-dashoffset 2s ease, filter 0.5s;
        }

        /* Envelope */
        .envelope-svg {
            width: 100px;
            height: 100px;
            display: none;
            opacity: 0;
            transform: scale(0.5);
            transition: all 0.5s;
        }

        /* --- Slideshow --- */
        .slides-container {
            width: 100%;
            height: 160px;
            position: relative;
            display: flex;
            justify-content: center;
        }

        .slide {
            position: absolute;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: transform 0.6s cubic-bezier(0.25, 1, 0.5, 1), opacity 0.6s ease;
            opacity: 0;
            transform: translateX(100%);
            pointer-events: none;
        }
        .slide.active { opacity: 1; transform: translateX(0); pointer-events: auto; }
        .slide.prev { opacity: 0; transform: translateX(-100%); }

        .question-text {
            font-size: 20px;
            color: #444;
            margin-bottom: 15px;
            font-weight: 500;
            transition: color 0.3s;
            padding: 0 10px;
        }

        /* --- Logic Specific Classes --- */
        .stage-gift .gift-svg { display: block; transform: scale(1); }

        .stage-ram .gift-svg { display: none; }
        .stage-ram .ram-container { display: flex; opacity: 1; transform: translateY(0) rotate(0deg); }

        .stage-infinity .ram-container { display: none; }
        .stage-infinity .infinity-svg { display: block; opacity: 1; }

        .stage-envelope .infinity-svg { display: none; }
        .stage-envelope .envelope-svg { display: block; opacity: 1; transform: scale(1); }

        /* Effects */
        .charging {
            animation: shake 0.5s infinite;
        }
        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            30% { transform: translate(3px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            60% { transform: translate(-3px, 1px) rotate(0deg); }
            70% { transform: translate(3px, 1px) rotate(-1deg); }
            80% { transform: translate(-1px, -1px) rotate(1deg); }
            90% { transform: translate(1px, 2px) rotate(0deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }

        .super-charged {
            filter: drop-shadow(0 0 10px #ff00ff) drop-shadow(0 0 20px #00ffff);
            stroke: url(#rainbowGradient); /* For the infinity SVG stroke */
            stroke-dashoffset: 0 !important; /* Draw the line */
        }
        
        .text-glow {
            background: linear-gradient(to right, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: bold;
            font-size: 22px;
        }

        #confetti-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 50; }
        .fade-out { opacity: 0; pointer-events: none; transition: opacity 0.5s; }
    </style>
</head>
<body>
    <svg width="0" height="0" style="position:absolute;">
        <defs>
            <linearGradient id="rainbowGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop offset="0%" style="stop-color:#ff0000;stop-opacity:1" />
                <stop offset="16%" style="stop-color:#ff7f00;stop-opacity:1" />
                <stop offset="33%" style="stop-color:#ffff00;stop-opacity:1" />
                <stop offset="50%" style="stop-color:#00ff00;stop-opacity:1" />
                <stop offset="66%" style="stop-color:#0000ff;stop-opacity:1" />
                <stop offset="83%" style="stop-color:#4b0082;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#9400d3;stop-opacity:1" />
            </linearGradient>
        </defs>
    </svg>

    <!-- App Icon -->
    <div class="desktop-icon" id="icon-love">
        <div class="icon-img"></div>
        <div class="icon-label">love.exe</div>
    </div>

    <!-- Sticky Note Icon -->
    <div class="desktop-icon" id="icon-note">
        <div class="note-img">hello</div>
    </div>

    <div class="window" id="app">
        <div class="title-bar">
            <span>love.exe</span>
            <div class="controls">
                <div class="dot close-btn" id="closeBtn"></div>
            </div>
        </div>
        
        <div class="content">
            <!-- Screen 1: Login -->
            <div id="screen-login">
                <div class="avatar">
                    <svg viewBox="0 0 100 100" width="100%" height="100%">
                        <!-- Sky -->
                        <rect width="100" height="100" fill="#a2d2ff"/>
                        <!-- Sun -->
                        <circle cx="50" cy="55" r="25" fill="#fcd34d"/>
                        <!-- Rays -->
                        <g stroke="#fcd34d" stroke-width="4" stroke-linecap="round">
                            <line x1="50" y1="20" x2="50" y2="10"/>
                            <line x1="80" y1="55" x2="90" y2="55"/>
                            <line x1="20" y1="55" x2="10" y2="55"/>
                            <line x1="75" y1="30" x2="82" y2="23"/>
                            <line x1="25" y1="30" x2="18" y2="23"/>
                        </g>
                        <!-- Hills/Landscape -->
                        <path d="M0 100 L0 75 Q 30 55 60 75 T 100 70 V 100 Z" fill="#86efac"/>
                        <path d="M0 100 L0 85 Q 40 70 80 90 L 100 90 V 100 Z" fill="#4ade80"/>
                    </svg>
                </div>
                <div class="username">my valentine</div>
                <button class="btn" id="loginBtn">Login</button>
            </div>

            <!-- Screen 2: Main -->
            <div id="screen-main">
                <div class="icon-stage" id="iconStage">
                    <!-- Gift Box -->
                    <svg class="gift-svg" viewBox="0 0 100 100">
                        <rect x="20" y="40" width="60" height="50" rx="4" fill="#ff6b81" />
                        <rect x="15" y="25" width="70" height="15" rx="2" fill="#ff4757" />
                        <rect x="45" y="25" width="10" height="65" fill="#f8f9fa" />
                        <path d="M50 25 C 50 25 30 5 20 25 C 15 35 45 30 50 25" fill="none" stroke="#f8f9fa" stroke-width="4" stroke-linecap="round"/>
                        <path d="M50 25 C 50 25 70 5 80 25 C 85 35 55 30 50 25" fill="none" stroke="#f8f9fa" stroke-width="4" stroke-linecap="round"/>
                    </svg>
                    <!-- RAM Stick with Label -->
                    <div class="ram-container">
                        <svg class="ram-svg" viewBox="0 0 100 50">
                            <rect x="0" y="10" width="100" height="35" rx="2" fill="#2ecc71" stroke="#27ae60" stroke-width="1"/>
                            <rect x="10" y="18" width="15" height="15" fill="#34495e"/>
                            <rect x="30" y="18" width="15" height="15" fill="#34495e"/>
                            <rect x="50" y="18" width="15" height="15" fill="#34495e"/>
                            <rect x="70" y="18" width="15" height="15" fill="#34495e"/>
                            <path d="M5 45 L95 45" stroke="#f1c40f" stroke-width="3" stroke-dasharray="8 2"/>
                        </svg>
                        <div class="ram-label">stick of ram</div>
                    </div>
                    <!-- Infinity -->
                    <svg class="infinity-svg" viewBox="0 0 100 50">
                        <path d="M20,25 C20,10 40,10 50,25 C60,40 80,40 80,25 C80,10 60,10 50,25 C40,40 20,40 20,25 Z" />
                    </svg>
                    <!-- Envelope -->
                    <svg class="envelope-svg" viewBox="0 0 100 100">
                         <rect x="10" y="25" width="80" height="50" rx="5" fill="#fff" stroke="#444" stroke-width="2"/>
                         <path d="M10 25 L 50 55 L 90 25" fill="none" stroke="#444" stroke-width="2"/>
                         <path d="M10 75 L 40 50" fill="none" stroke="#444" stroke-width="2"/>
                         <path d="M90 75 L 60 50" fill="none" stroke="#444" stroke-width="2"/>
                    </svg>
                </div>

                <div class="slides-container">
                    <!-- 1. Gift Box (Start here) -->
                    <div class="slide active" id="slide1">
                        <h2 class="question-text">I have a gift for you</h2>
                        <button class="btn" id="btnOpenGift" style="background:#70a1ff;">open it</button>
                    </div>
                    <!-- 2. RAM -->
                    <div class="slide" id="slide2">
                        <h2 class="question-text">For infinite happy memories</h2>
                        <button class="btn" id="btnNextRam" style="background:#28c940;">awesome</button>
                    </div>
                    <!-- 3. Infinity -->
                    <div class="slide" id="slide3">
                        <h2 class="question-text" id="infinityText">I love you till infinity</h2>
                        <button class="btn" id="btnUpdate" style="background:#ff9f43;">get latest update</button>
                        <button class="btn hidden" id="btnNextInf" style="background:#28c940; margin-top:10px;">next</button>
                    </div>
                    <!-- 4. Letter -->
                    <div class="slide" id="slide4">
                        <h2 class="question-text">You have a letter</h2>
                        <button class="btn" id="btnRead" style="background:#ff6b81;">read it</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <canvas id="confetti-canvas"></canvas>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const app = document.getElementById('app');
            const iconLove = document.getElementById('icon-love');
            const closeBtn = document.getElementById('closeBtn');
            const loginBtn = document.getElementById('loginBtn');
            
            const screenLogin = document.getElementById('screen-login');
            const screenMain = document.getElementById('screen-main');
            const iconStage = document.getElementById('iconStage');
            
            const btnOpenGift = document.getElementById('btnOpenGift');
            const btnNextRam = document.getElementById('btnNextRam');
            const btnUpdate = document.getElementById('btnUpdate');
            const btnNextInf = document.getElementById('btnNextInf');
            const btnRead = document.getElementById('btnRead');

            const infinityText = document.getElementById('infinityText');

            const slides = {
                1: document.getElementById('slide1'),
                2: document.getElementById('slide2'),
                3: document.getElementById('slide3'),
                4: document.getElementById('slide4')
            };

            // Transitions
            function switchSlide(from, to) {
                slides[from].classList.remove('active');
                slides[from].classList.add('prev');
                slides[to].classList.add('active');
                setTimeout(() => slides[from].classList.remove('prev'), 600);
            }

            // Listeners
            iconLove.addEventListener('click', () => app.classList.add('open'));
            closeBtn.addEventListener('click', () => {
                app.classList.remove('open');
                setTimeout(() => location.reload(), 500);
            });

            // Login -> Main Screen (Gift Box)
            loginBtn.addEventListener('click', () => {
                screenLogin.classList.add('fade-out');
                setTimeout(() => {
                    screenLogin.style.display = 'none';
                    screenMain.style.display = 'flex';
                    // Initialize stage with gift
                    iconStage.classList.add('stage-gift');
                }, 500);
            });

            // 1 -> 2: Open Gift clicked -> Show RAM
            btnOpenGift.addEventListener('click', () => {
                iconStage.classList.remove('stage-gift');
                iconStage.classList.add('stage-ram');
                startConfetti();
                switchSlide(1, 2);
            });

            // 2 -> 3: Awesome clicked -> Show Infinity
            btnNextRam.addEventListener('click', () => {
                iconStage.classList.remove('stage-ram');
                iconStage.classList.add('stage-infinity');
                switchSlide(2, 3);
                
                // Reset infinity state just in case
                document.querySelector('.infinity-svg').style.strokeDashoffset = '300'; 
            });

            // Update Process
            btnUpdate.addEventListener('click', () => {
                const stage = document.querySelector('.icon-stage');
                btnUpdate.innerHTML = "Updating...";
                btnUpdate.style.cursor = "wait";
                
                // Charge up effect
                stage.classList.add('charging');
                
                setTimeout(() => {
                    stage.classList.remove('charging');
                    document.querySelector('.infinity-svg').classList.add('super-charged');
                    
                    // Change text
                    infinityText.innerHTML = "I love you till infinity and beyond";
                    infinityText.classList.add('text-glow');
                    
                    // Show next button
                    btnUpdate.style.display = 'none';
                    btnNextInf.classList.remove('hidden');
                    
                    startConfetti();
                }, 2000); // 2 second charge
            });

            // 3 -> 4: Next Infinity clicked -> Show Letter
            btnNextInf.addEventListener('click', () => {
                iconStage.classList.remove('stage-infinity');
                iconStage.classList.add('stage-envelope');
                switchSlide(3, 4);
            });

            // 4: Read Letter
            btnRead.addEventListener('click', () => {
                // Placeholder link
                
                window.location.href = "https://creatomat.github.io/dawn.pdf";
            });

            // --- Confetti ---
            const canvas = document.getElementById('confetti-canvas');
            const ctx = canvas.getContext('2d');
            let confettiActive = false;
            let particles = [];
            
            function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
            window.addEventListener('resize', resize); resize();

            class Particle {
                constructor() {
                    this.x = Math.random() * canvas.width;
                    this.y = -10;
                    this.size = Math.random() * 8 + 4;
                    this.speedY = Math.random() * 3 + 2;
                    this.speedX = Math.random() * 4 - 2;
                    this.color = ['#ff4757', '#2ecc71', '#3498db', '#f1c40f'][Math.floor(Math.random() * 4)];
                    this.rotation = Math.random() * 360;
                }
                update() { this.y += this.speedY; this.x += this.speedX; this.rotation += 5; }
                draw() {
                    ctx.save();
                    ctx.translate(this.x, this.y);
                    ctx.rotate(this.rotation * Math.PI / 180);
                    ctx.fillStyle = this.color;
                    ctx.fillRect(0, 0, this.size, this.size);
                    ctx.restore();
                }
            }

            function startConfetti() {
                if(!confettiActive) {
                    confettiActive = true;
                    spawn();
                    animate();
                    setTimeout(() => confettiActive = false, 2000);
                }
            }
            
            function spawn() {
                if(confettiActive) {
                    particles.push(new Particle());
                    if(particles.length < 100) requestAnimationFrame(spawn);
                }
            }

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                particles.forEach((p, i) => {
                    p.update();
                    p.draw();
                    if(p.y > canvas.height) particles.splice(i, 1);
                });
                if(particles.length > 0 || confettiActive) requestAnimationFrame(animate);
            }
        });
    </script>
</body>
</html>
